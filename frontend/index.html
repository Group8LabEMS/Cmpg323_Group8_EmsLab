<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LabEMS - Equipment Booking</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <!-- Header -->
    <header class="topbar">
      <div class="logo">LabEMS</div>
      <nav>
  <a href="#bookings" id="bookNowBtn" data-target="bookings">Book Now</a>
  <a href="about_us.html">About</a>
  <a href="contact_us.html">Contact Us</a>
      </nav>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
  <h3>John Doe</h3>
  <!-- Sidebar buttons are rendered dynamically by script.js based on role -->
  <button class="sidebar-btn logout">Logout</button>
      
    </aside>

    <!-- Main Content -->
    <main>
      <!-- Dashboard -->
      <section id="dashboard" class="tab hidden">
        <h2 style="color: #7A4EB0; font-size: 2rem; margin-bottom: 1.5rem;">Dashboard</h2>
      </section>

      <!-- Reports Section -->
      <section id="reports" class="tab hidden">
        <h2 style="color: #7A4EB0; font-size: 2rem; margin-bottom: 1.5rem; margin: 1rem -7%;">Reports</h2>
        <p style="margin-bottom: 1.5rem; margin: 1rem -7%;">View and download reports from various management sections.</p>
        <div class="report-controls" style="margin: 1rem -7%;">
          <select id="reportTypeSelect">
            <option value="user">Users Report</option>
            <option value="booking">Bookings Report</option>
            <option value="equipment">Equipment Report</option>
          </select>
          <select id="reportSortSelect">
            <option value="">Sort by</option>
          </select>
          <input type="text" id="reportSearchInput" placeholder="Search All Columns (Type to filter)">
              
          <button id="reportFilterBtn" class="action-book" style="min-width: 120px; background-color: var(--secondary-color);">
            Filter <span id="filterActiveIndicator" class="hidden" style="margin-left: 5px; color: #ffeb3b; font-weight: bold;">(Active)</span>
          </button>
        </div>
        <div class="report-table-container">
          <table class="report-table">
            <thead>
              <tr id="reportTableHeader">
                </tr>
            </thead>
            <tbody id="reportTableBody">
              </tbody>
          </table>
        </div>
        <div class="report-actions" style="margin:1rem -7%;">
          <button id="reportClearFilterBtn" class="cancel-btn">Clear Form</button>
          <button id="downloadReportBtn" class="action-book">Download CSV</button>
        </div>
      </section>
      
      <div id="filterModal" class="modal hidden">
        <div class="modal-content">
          <h2 id="filterModalTitle" style="color: #7A4EB0; margin-bottom: 20px;">Apply Filters</h2>
          <div id="filterFormContent">
            </div>
          <div class="modal-actions" style="margin-top: 30px; display: flex; justify-content: flex-end; gap: 15px;">
            <button id="modalClearFiltersBtn" class="cancel-btn">Clear Filters</button>
            <button id="modalApplyFiltersBtn" class="action-book">Apply Filters</button>
          </div>
        </div>
      </div>

      <!-- Profile -->
      <section id="profile" class="tab hidden">
        <h2>Profile</h2>
      </section>

      <!-- Bookings -->
      <section id="bookings" class="tab hidden">
        <h2>Your Bookings</h2>
        <table>
          <thead>
            <tr>
              <th>Equipment</th>
              <th>Date</th>
              <th>Time</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="bookingTableBody"></tbody>
        </table>
      </section>

      <!-- Equipment -->
      <section id="equipment" class="tab">
        

        <table>
          
          <tbody id="equipmentTableBody"></tbody>
        </table>
      </section>
      <!-- Maintenance Tab (Admin only) -->
      <section id="maintenance" class="tab hidden">
        <h2 style="color:#7A4EB0;font-size:2rem;margin-bottom:1.5rem;margin:1rem -7%;">Maintenance Tracking</h2>
        <p style="margin-bottom:1.5rem;margin:1rem -7%;">Track equipment that requires repair, is being repaired, or has been repaired.</p>
        <table class="maintenance-table" style="margin:1rem -7%;">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Location</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="maintenanceTableBody"></tbody>
        </table>
      </section>

  <!-- User Management -->
  <section id="userManagement" class="tab hidden"></section>

      <!-- Admin Bookings Management -->
      <section id="admin-bookings" class="tab hidden">
        <h2 style="color:#7A4EB0;font-size:2rem;margin-bottom:1.5rem;">Bookings</h2>
        <table class="admin-bookings-table" style="width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #e0d3f3;">
          <thead>
            <tr style="background:#8d5fc5;color:#fff;">
              <th>ID</th>
              <th>User</th>
              <th>Equipment</th>
              <th>Status</th>
              <th>From</th>
              <th>To</th>
              <th>Notes</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminBookingsTableBody"></tbody>
        </table>
      </section>

      <section id="adminDashboard" class="tab hidden">
        <div id="adminStats" class="stats-container"></div>
        <canvas id="myChart" width="400" height="200"></canvas>
      </section>

      <!-- About Us -->
      <section id="about" class="tab hidden">
        <main class="login-container">
          <section class="login-form">
            <h2>About LabEMS</h2>
            <p>Learn more about our mission and services</p>
            <div class="about-content">
              <p>
                LabEMS is a cutting-edge Laboratory Equipment Management System designed to streamline the process of booking, managing, and maintaining laboratory equipment. Our mission is to empower researchers, students, and professionals by providing an intuitive platform to access state-of-the-art equipment with ease.
              </p>
              <p>
                Founded with the goal of enhancing laboratory efficiency, LabEMS offers a user-friendly interface, real-time equipment availability, and robust management tools. Whether you're in academia, industry, or research, LabEMS is here to support your scientific endeavors.
              </p>
            </div>
          </section>
        </main>
      </section>

      <!-- Contact Us -->
      <section id="contact" class="tab hidden">
        <div class="modal-content">
          <h2>Contact Us</h2>
          <input type="text" placeholder="Your Email">
          <textarea name="txt_email_description" cols="40" rows="5" class="contactus-textarea" placeholder="Description"></textarea>
          <div>
            <button class="contactus-action">Submit</button>
          </div>
        </div>
      </section>

    </main>

      <!-- Booking Modal -->
      <div id="bookingModal" class="modal hidden">
          <div class="modal-content">
              <h3>Booking Confirmation</h3>
              <p>Select Date and Time slot for your booking</p>

              <label>
              <input type="date" id="bookingDate" placeholder="Date e.g. YYYY/MM/DD">
              </label>

              <div class="time-inputs">
              <input type="time" id="startTime" placeholder="Start Time">
              <input type="time" id="endTime" placeholder="End Time">
              </div>

              <div class="modal-actions">
              <button id="confirmBooking">Confirm</button>
              <button id="cancelBooking" class="cancel">Cancel</button>
              </div>
          </div>
      </div>

      <!-- Update Booking Modal -->
      <div id="updateModal" class="modal hidden">
      <div class="modal-content">
          <h3>Update Booking</h3>
          <p>Change the date and time for your booking</p>

          <label>
              <input type="date" id="updateDate">
          </label>

          <div class="time-inputs">
              <input type="time" id="updateStartTime">
              <input type="time" id="updateEndTime">
          </div>

          <div class="modal-actions">
              <button id="confirmUpdate">Update</button>
              <button id="cancelUpdate" class="cancel">Cancel</button>
          </div>
      </div>
      </div>

    <!-- Delete Booking Modal -->
    <div id="deleteModal" class="modal hidden">
      <div class="modal-content">
        <h3>Delete Booking</h3>
        <p id="deleteMessage">Are you sure you want to delete this booking?</p>

        <div class="modal-actions">
          <button id="confirmDelete">Confirm</button>
          <button id="cancelDelete" class="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <!-- User Delete Modal -->
    <div id="userDeleteModal" class="modal hidden">
      <div class="modal-content">
        <h3>Delete User</h3>
        <p id="userDeleteMessage">Are you sure you want to delete this user?</p>
        <div class="modal-actions">
          <button id="confirmUserDelete" class="action-delete">Delete</button>
          <button id="cancelUserDelete" class="cancel-btn">Cancel</button>
        </div>
      </div>
    </div>
    
    <!-- User Management Modal -->
    <div id="userModal" class="modal hidden">
  <div class="modal-content" style="max-width:420px;width:96vw;padding:2rem 2rem 2rem 2rem;margin:0 auto;">
        <h2 id="userModalTitle" style="color:#8d5fc5;font-size:2.2rem;margin-bottom:0.2rem;font-weight:bold;text-align:center;">User Profile</h2>
        <div style="color:#8d5fc5;font-size:1.2rem;margin-bottom:1.5rem;text-align:center;">Create and Update user information</div>
        <form id="userForm" style="display:flex;flex-direction:column;gap:1.1rem;align-items:stretch;max-width:100%;">
          <input type="text" id="nameInput" placeholder="Cosmo" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="text" id="surnameInput" placeholder="Kramer" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="text" id="universityNoInput" placeholder="12123434" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="email" id="emailInput" placeholder="ckramer@mynwu.ac.za" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="text" id="cellInput" placeholder="Cellphone No" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="password" id="passwordInput" placeholder="Password" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <input type="password" id="repasswordInput" placeholder="Re-enter Password" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
          <label for="roleInput" style="font-size:1.1rem;margin-top:0.5rem;">Role</label>
          <select id="roleInput" style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <option value="Student">Student</option>
            <option value="Admin">Admin</option>
          </select>

          <button id="confirmUser" class="action-book" style="width:100%;background:#8d5fc5;color:#fff;font-size:1.2rem;padding:1rem 0;border-radius:8px;border:none;font-weight:bold;margin-top:0.7rem;">Save</button>
          <button id="cancelUser" class="cancel-btn" style="width:100%;margin-top:0.7rem;background:#fff;color:#8d5fc5;font-size:1.1rem;padding:0.7rem 0;border-radius:8px;border:2px solid #8d5fc5;box-sizing:border-box;">Cancel</button>
        </form>
      </div>
    </div>

    <!-- Admin Dashboard Modal -->
    <div id="adminModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" onclick="closeAdminModal()">&times;</span>
        <h2 id="modalTitle">Admin Action</h2>
        <div id="modalBody">
          <!-- dynamic content goes here -->
        </div>
      </div>
    </div>

    <script type="module" src="src/script.js"></script>
  </body>
</html>