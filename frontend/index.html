<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LabEMS - Equipment Booking</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <!-- Header -->
  <header class="topbar">
    <div class="logo">LabEMS</div>
    <nav>
      <a href="#bookings" id="bookNowBtn" class="btn btn-secondary" data-target="bookings">Book Now</a>
    </nav>
  </header>

  <!-- Content Container -->
  <div class="content-container">
    <!--=============== SIDEBAR ===============-->
    <aside class="sidebar">
      <!-- Sidebar buttons are rendered dynamically by script.js based on role -->
    </aside>

    <!--=============== MAIN CONTENT ===============-->
    <main>
      <!------------ SECTIONS ------------>

      <!-- Dashboard -->
      <section id="dashboard" class="tab hidden">
        <h2 class="card-title">Dashboard</h2>
      </section>

      <!-- Reports Section -->
      <section id="reports" class="tab hidden">
        <div class="card-header">
          <h2 class="card-title">Reports Management</h2>
          <div class="card-subtitle">View, filter, and download reports from various management sections.</div>
        </div>
        <div class="controls-container">
          <div class="controls-left">
            <button class="btn btn-primary">Create Report</button>
          </div>
          <div class="controls-right">
            <select id="reportTypeSelect" class="form-select">
              <option value="user">Users Report</option>
              <option value="booking">Bookings Report</option>
              <option value="equipment">Equipment Report</option>
            </select>
            <select id="reportSortSelect" class="form-select">
              <option value="">Sort by</option>
            </select>
            <input type="text" id="reportSearchInput" placeholder="Search All Columns (Type to filter)"
              class="form-input" />
            <button id="reportFilterBtn" class="btn btn-primary filter-btn">
              Filter <span id="filterActiveIndicator" class="hidden active-indicator">(Active)</span>
            </button>
          </div>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr id="reportTableHeader"></tr>
            </thead>
            <tbody id="reportTableBody"></tbody>
          </table>
        </div>
        <div class="actions-container">
          <button id="reportClearFilterBtn" class="btn btn-secondary">Clear Form</button>
          <button id="downloadReportBtn" class="btn btn-primary">Download CSV</button>
        </div>
      </section>

      <div id="filterModal" class="modal hidden">
        <div class="modal-content">
          <h2 id="filterModalTitle" class="modal-title">Apply Filters</h2>
          <div id="filterFormContent">
          </div>
          <div class="modal-actions-flex">
            <button id="modalClearFiltersBtn" class="btn btn-secondary">Clear Filters</button>
            <button id="modalApplyFiltersBtn" class="btn btn-primary">Apply Filters</button>
          </div>
        </div>
      </div>

      <!-- Profile -->
      <section id="profile" class="tab hidden"></section>

      <!-- Bookings -->
      <section id="bookings" class="tab hidden">
        <div class="card">
          <h2 class="card-title">Your Bookings</h2>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Equipment</th>
                <th>Date</th>
                <th>Time</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="bookingTableBody"></tbody>
          </table>
        </div>
      </section>

      <!-- Equipment Management -->
      <section id="equipment" class="tab">
        <h2 class="card-title">Equipment Management</h2>
      </section>

      <!-- Maintenance Tab (Admin only) -->
      <section id="maintenance" class="tab hidden">
        <h2 class="card-title">Maintenance Tracking</h2>
        <div class="card-subtitle">Track equipment that requires repair, is being repaired, or has been repaired.</div>
        <div class="card">
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="maintenanceTableBody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- User Management -->
      <section id="userManagement" class="tab hidden"></section>

      <!-- Admin Bookings Management -->
      <section id="admin-bookings" class="tab hidden">
        <h2 class="card-title">Bookings Management</h2>
      </section>

      <section id="adminAudit" class="tab hidden">
        <div class="card-header">
          <h2 class="card-title">Audit Trails</h2>
          <div class="card-subtitle">View audit logs for all system actions.</div>
        </div>
        <div class="controls-container">
          <div class="controls-left"></div>
          <div class="controls-right">
            <select id="auditSortSelect" class="form-select">
              <option value="">Sort by</option>
              <option value="date">Date</option>
              <option value="user">User</option>
              <option value="action">Action</option>
            </select>
            <input type="text" id="auditSearchInput" placeholder="Search All Columns (Type to filter)"
              class="form-input" />
            <button id="auditFilterBtn" class="btn btn-primary filter-btn">
              Filter <span id="auditFilterActiveIndicator" class="hidden active-indicator">(Active)</span>
            </button>
          </div>
        </div>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr id="auditTableHeader"></tr>
            </thead>
            <tbody id="auditTableBody"></tbody>
          </table>
        </div>
        <div class="actions-container">
          <button id="auditClearFilterBtn" class="btn btn-secondary">Clear Filters</button>
          <button id="downloadAuditBtn" class="btn btn-primary">Download CSV</button>
        </div>
      </section>

      <!-- About Us -->
      <section id="about" class="tab hidden">
        <div class="login-container">
          <div class="card">
            <h2 class="card-title">About LabEMS</h2>
            <p class="card-subtitle">Learn more about our mission and services</p>
            <div class="about-content">
              <p>
                LabEMS is a cutting-edge Laboratory Equipment Management System designed to streamline the process of
                booking, managing, and maintaining laboratory equipment. Our mission is to empower researchers,
                students, and professionals by providing an intuitive platform to access state-of-the-art equipment with
                ease.
              </p>
              <p>
                Founded with the goal of enhancing laboratory efficiency, LabEMS offers a user-friendly interface,
                real-time equipment availability, and robust management tools. Whether you're in academia, industry, or
                research, LabEMS is here to support your scientific endeavors.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Contact Us -->
      <section id="contact" class="tab hidden">
        <div class="card">
          <h2 class="card-title">Contact Us</h2>
          <div class="form-group">
            <input type="text" placeholder="Your Email" class="form-input form-input-full">
          </div>
          <div class="form-group">
            <textarea name="txt_email_description" placeholder="Description" class="form-textarea"></textarea>
          </div>
          <button class="btn btn-primary btn-lg btn-full">Submit</button>
        </div>
      </section>

      <!------------ MODALS ------------>

      <!-- Booking Modal -->
      <div id="bookingModal" class="modal hidden">
        <div class="modal-content">
          <h3>Booking Confirmation</h3>
          <p>Select Date and Time slot for your booking</p>

          <div class="form-group">
            <input type="date" id="bookingDate" class="form-input" placeholder="Date e.g. YYYY/MM/DD">
          </div>

          <div class="time-inputs">
            <input type="time" id="startTime" class="form-input" placeholder="Start Time">
            <input type="time" id="endTime" class="form-input" placeholder="End Time">
          </div>

          <div class="modal-actions">
            <button id="confirmBooking" class="btn btn-primary">Confirm</button>
            <button id="cancelBooking" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Update Booking Modal -->
      <div id="updateModal" class="modal hidden">

        <div class="modal-content">
          <h3>Update Booking</h3>
          <p>Change the date and time for your booking</p>

          <div class="form-group">
            <input type="date" id="updateDate" class="form-input">
          </div>

          <div class="time-inputs">
            <input type="time" id="updateStartTime" class="form-input">
            <input type="time" id="updateEndTime" class="form-input">
          </div>

          <div class="modal-actions">
            <button id="confirmUpdate" class="btn btn-primary">Update</button>
            <button id="cancelUpdate" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Delete Booking Modal -->
      <div id="deleteModal" class="modal hidden">
        <div class="modal-content">
          <h3>Delete Booking</h3>
          <p id="deleteMessage">Are you sure you want to delete this booking?</p>

          <div class="modal-actions">
            <button id="confirmDelete" class="btn btn-danger">Confirm</button>
            <button id="cancelDelete" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <!-- User Delete Modal -->
      <div id="userDeleteModal" class="modal hidden">
        <div class="modal-content">
          <h3>Delete User</h3>
          <p id="userDeleteMessage">Are you sure you want to delete this user?</p>
          <div class="modal-actions">
            <button id="confirmUserDelete" class="btn btn-danger">Delete</button>
            <button id="cancelUserDelete" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </div>

      <!-- User Management Modal -->
      <div id="userModal" class="modal hidden">
        <div class="modal-content" style="max-width:420px;width:96vw;padding:2rem 2rem 2rem 2rem;margin:0 auto;">
          <h2 id="userModalTitle"
            style="color:#8d5fc5;font-size:2.2rem;margin-bottom:0.2rem;font-weight:bold;text-align:center;">User Profile
          </h2>
          <div style="color:#8d5fc5;font-size:1.2rem;margin-bottom:1.5rem;text-align:center;">Create and Update user
            information</div>
          <form id="userForm" style="display:flex;flex-direction:column;gap:1.1rem;align-items:stretch;max-width:100%;">
            <input type="text" id="nameInput" placeholder="Cosmo"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="text" id="surnameInput" placeholder="Kramer"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="text" id="universityNoInput" placeholder="12123434"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="email" id="emailInput" placeholder="ckramer@mynwu.ac.za"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="text" id="cellInput" placeholder="Cellphone No"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="password" id="passwordInput" placeholder="Password"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <input type="password" id="repasswordInput" placeholder="Re-enter Password"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
            <label for="roleInput" style="font-size:1.1rem;margin-top:0.5rem;">Role</label>
            <select id="roleInput"
              style="font-size:1.1rem;padding:0.7rem 1rem;border-radius:8px;border:2px solid #8d5fc5;background:#fff;color:#7A4EB0;outline:none;width:100%;box-sizing:border-box;">
              <option value="Student">Student</option>
              <option value="Admin">Admin</option>
            </select>

            <button id="confirmUser" class="action-book"
              style="width:100%;background:#8d5fc5;color:#fff;font-size:1.2rem;padding:1rem 0;border-radius:8px;border:none;font-weight:bold;margin-top:0.7rem;">Save</button>
            <button id="cancelUser" class="cancel-btn"
              style="width:100%;margin-top:0.7rem;background:#fff;color:#8d5fc5;font-size:1.1rem;padding:0.7rem 0;border-radius:8px;border:2px solid #8d5fc5;box-sizing:border-box;">Cancel</button>
          </form>
        </div>
      </div>

      <!-- Admin Dashboard Modal -->
      <div id="adminModal" class="modal hidden">
        <div class="modal-content">
          <span class="close-btn" onclick="closeAdminModal()">&times;</span>
          <h2 id="modalTitle">Admin Action</h2>
          <div id="modalBody">
            <!-- dynamic content goes here -->
          </div>
        </div>
      </div>

    </main>
  </div>

  <script type="module" src="src/script.js"></script>
</body>

</html>